{# user/documents/partials/company_results.html #}

<div>
  
  {# --- Mobile list (xs only) --- #}
  <div class="d-block d-sm-none mt-2">
    {% for d in company_results %}
      <div class="docs-list-item">
        <div class="docs-list-text">
          <div class="line-1 text-truncate">
            {{ d.document_title|default:d.file_name }}
          </div>
          <div class="line-2">
            <span class="text-muted small">
              ({{ d.file_name }}
               {% if d.size_bytes %} â€¢ {{ d.size_bytes|filesizeformat }}
               {% elif d.file_size_bytes %} â€¢ {{ d.file_size_bytes|filesizeformat }}
               {% elif d.size %} â€¢ {{ d.size|filesizeformat }}{% endif %})
            </span>
          </div>
          <div class="line-3">{{ d.uploaded_at|date:"Y-m-d H:i" }}</div>
        </div>
        <div class="docs-list-actions">
          <a class="btn btn-sm btn-outline-primary"
             href="{% url 'download_signed_document' doc_id=d.id %}">
            Download
          </a>
        </div>
      </div>
    {% empty %}
      <div class="text-muted">No documents.</div>
    {% endfor %}
  </div>

  {# --- Desktop table (sm and up) --- #}
  <div class="d-none d-sm-block">
    <div class="table-responsive">
      <table class="table table-sm align-middle docs-table mt-2" style="table-layout:fixed; width:100%;">
        <colgroup>
          <col style="width:60%;">   {# Title #}
          <col style="width:25%;">   {# Uploaded #}
          <col style="width:15%;">   {# Action #}
        </colgroup>
        <thead class="table-light">
          <tr>
            <th>Title</th>
            <th>Uploaded</th>
            <th class="actions-col text-end">Action</th>
          </tr>
        </thead>
        <tbody>
          {% for d in company_results %}
            <tr>
              <td class="doc-name">
                <div class="fw-semibold text-wrap">{{ d.document_title|default:d.file_name }}</div>
                <div class="text-muted small">
                  ({{ d.file_name }}
                   {% if d.size_bytes %} â€¢ {{ d.size_bytes|filesizeformat }}
                   {% elif d.file_size_bytes %} â€¢ {{ d.file_size_bytes|filesizeformat }}
                   {% elif d.size %} â€¢ {{ d.size|filesizeformat }}{% endif %})
                  {% if d.notes %} â€” {{ d.notes }}{% endif %}
                </div>
              </td>
              <td class="upload-date">{{ d.uploaded_at|date:"Y-m-d H:i" }}</td>
              <td class="actions-col text-end" style="white-space:nowrap;">
                <a class="btn btn-sm btn-outline-primary"
                   href="{% url 'download_signed_document' doc_id=d.id %}">
                  Download
                </a>
              </td>
            </tr>
          {% empty %}
            <tr><td colspan="3" class="text-muted">No documents.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {# ðŸ”¹ Pagination for company_results (10 per page) #}
  {% if company_results.has_other_pages %}
    <nav class="mt-3" aria-label="Company document pages">
      <ul class="pagination pagination-sm justify-content-center">

        {% if company_results.has_previous %}
          <li class="page-item">
            <a class="page-link"
               href="?tab=company&company_page={{ company_results.previous_page_number }}">
              Previous
            </a>
          </li>
        {% endif %}

        {% for num in company_results.paginator.page_range %}
          <li class="page-item {% if num == company_results.number %}active{% endif %}">
            <a class="page-link"
               href="?tab=company&company_page={{ num }}">
              {{ num }}
            </a>
          </li>
        {% endfor %}

        {% if company_results.has_next %}
          <li class="page-item">
            <a class="page-link"
               href="?tab=company&company_page={{ company_results.next_page_number }}">
              Next
            </a>
          </li>
        {% endif %}

      </ul>
    </nav>
  {% endif %}
</div>
