{# user/documents/partials/company_notes_display.html #}

<div id="company-notes-edit-{{ d.id }}">
  {% if d.notes %}
  <div class="text-muted small mt-1">

    <div class="d-flex align-items-center gap-2">
      <a class="link-secondary text-decoration-none"
         data-bs-toggle="collapse"
         href="#company-notes-{{ d.id }}"
         role="button"
         aria-expanded="{% if open_notes %}true{% else %}false{% endif %}"
         aria-controls="company-notes-{{ d.id }}">
        Notes <i class="bi bi-chevron-down ms-1 align-middle fs-6"></i>
      </a>

      <button type="button"
              class="btn btn-sm btn-outline-secondary"
              onclick="event.stopPropagation()"
              hx-get="{% url 'company_doc_notes_edit' d.id %}"
              hx-target="#company-notes-block-{{ d.id }}"
              hx-swap="outerHTML">
        Edit
      </button>
    </div>

    <div class="collapse mt-1 {% if open_notes %}show{% endif %}"
     id="company-notes-{{ d.id }}">
      <div class="border rounded bg-light p-2">
        {{ d.notes|linebreaksbr }}
      </div>
    </div>

  </div>
{% else %}
  <div class="text-muted small mt-1">
    <button type="button"
            class="btn btn-sm btn-outline-secondary"
            hx-get="{% url 'company_doc_notes_edit' d.id %}"
            hx-target="#company-notes-block-{{ d.id }}"
            hx-swap="outerHTML">
      Add notes
    </button>
  </div>
{% endif %}
</div>